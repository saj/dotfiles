#!/usr/bin/python

# Accept minified JSON on stdin and write an equivalent, pretty-printed 
# representation to stdout suitable for human consumption.
#
# If fed garbage, complain, and pass through the garbage.
#
# Example:
#
# curl --header "Accept: application/json" ... http://api/whatever | \
#      pretty-json

import os
import sys

try:
    import json
except ImportError:
    import simplejson as json

me    = os.path.basename(sys.argv[0])
input = sys.stdin.read()

if len(input) > 0:
    try:
        jsonified = json.loads(input)
    except Exception:
        if not input.isspace():
            print >>sys.stderr, "%s: Input is not JSON!" % me
            print >>sys.stderr
            sys.stdout.write(input)
    else:
        print json.dumps(jsonified, indent=2)
