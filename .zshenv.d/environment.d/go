() {
  local -r gopath=~/.go

  if [[ -e "${gopath}" ]]; then
    if [[ -L "${gopath}" ]]; then
      local -r canon_gopath="$(readlink "${gopath}")"
    else
      local -r canon_gopath="${gopath}"
    fi

    export GOPATH="${canon_gopath}"

    __zshenv_lib_prepend_path 'PATH' "${canon_gopath}/bin"

    # Enable vendoring; introduced in Go 1.5.
    export GO15VENDOREXPERIMENT=1
  fi
}

# vim:ft=zsh
